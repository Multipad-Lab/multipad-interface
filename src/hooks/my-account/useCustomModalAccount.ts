import { useAccountModal } from "@rainbow-me/rainbowkit"
import { useEffect } from "react"
import { useNavigate } from "react-router-dom"
import { routesName } from "src/const/routes"

export const useCustomModalAccount = () => {
  const { accountModalOpen } = useAccountModal()
  const navigate = useNavigate()

  useEffect(() => {
    if (accountModalOpen) {
      const footerAccountModal = document.querySelector(
        ".iekbcc0.ju367v4y.ju367v2y.ju367v3j.ju367v44.ju367va.ju367v14.ju367v1q"
      ) as HTMLElement

      const htmlContent = `<div class="myAccount__idoPool">
          <div id="btn-my-account">
            <svg width="20" height="21" viewBox="0 0 20 21" fill="#ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M14.8415 5.07496V5.69163L11.8915 3.98329C10.7749 3.34163 9.21654 3.34163 8.1082 3.98329L5.1582 5.69996V5.07496C5.1582 3.19996 6.1832 2.16663 8.0582 2.16663H11.9415C13.8165 2.16663 14.8415 3.19996 14.8415 5.07496Z"></path><path d="M14.866 7.14162L14.7494 7.08328L13.616 6.43328L11.266 5.07495C10.5493 4.65828 9.44935 4.65828 8.73268 5.07495L6.38268 6.42495L5.24935 7.09162L5.09935 7.16662C3.64102 8.14995 3.54102 8.33328 3.54102 9.90828V13.675C3.54102 15.25 3.64102 15.4333 5.13268 16.4416L8.73268 18.5166C9.09102 18.7333 9.54102 18.825 9.99935 18.825C10.4493 18.825 10.9077 18.725 11.266 18.5166L14.8993 16.4166C16.366 15.4333 16.4577 15.2583 16.4577 13.675V9.90828C16.4577 8.33328 16.3577 8.14995 14.866 7.14162ZM12.3243 11.75L11.816 12.375C11.7327 12.4666 11.6743 12.6416 11.6827 12.7666L11.7327 13.5666C11.766 14.0583 11.416 14.3083 10.9577 14.1333L10.216 13.8333C10.0993 13.7916 9.90768 13.7916 9.79102 13.8333L9.04935 14.125C8.59102 14.3083 8.24102 14.05 8.27435 13.5583L8.32435 12.7583C8.33268 12.6333 8.27435 12.4583 8.19102 12.3666L7.67435 11.75C7.35768 11.375 7.49935 10.9583 7.97435 10.8333L8.74935 10.6333C8.87435 10.6 9.01602 10.4833 9.08268 10.3833L9.51602 9.71662C9.78268 9.29995 10.2077 9.29995 10.4827 9.71662L10.916 10.3833C10.9827 10.4916 11.1327 10.6 11.2493 10.6333L12.0243 10.8333C12.4993 10.9583 12.641 11.375 12.3243 11.75Z"></path></svg>
            <div>My Account</div>
          </div>
          <div id="btn-ido-pool">
            <svg width="20" height="21" viewBox="0 0 20 21" fill="#ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M17.4164 8.70833L17.9081 16.95C17.9247 17.175 17.8164 17.325 17.7581 17.3917C17.6914 17.4667 17.5497 17.5833 17.3164 17.5833H15.0414L16.8414 8.70833H17.4164ZM18.3331 5.5L18.3247 5.51667C18.3414 5.71667 18.3247 5.925 18.2747 6.13333L12.1331 17.4083C11.9331 18.25 11.1831 18.8333 10.3164 18.8333H17.3164C18.3914 18.8333 19.2414 17.925 19.1581 16.85L18.3331 5.5Z"></path><path d="M9.54154 2.36671C9.62487 2.03337 9.41654 1.69171 9.0832 1.60837C8.74987 1.53337 8.4082 1.73337 8.32487 2.06671L7.9082 3.79171H9.19154L9.54154 2.36671Z"></path><path d="M15.0414 2.34171C15.1164 2.00004 14.8997 1.67504 14.5581 1.60004C14.2247 1.52504 13.8914 1.74171 13.8164 2.08338L13.4414 3.80838H14.7247L15.0414 2.34171Z"></path><path d="M18.1838 4.94166C17.9088 4.27499 17.2588 3.79999 16.4588 3.79999H14.7254L14.2588 5.95833C14.1921 6.24999 13.9338 6.44999 13.6504 6.44999C13.6088 6.44999 13.5588 6.44999 13.5171 6.43333C13.1838 6.35833 12.9671 6.02499 13.0338 5.69166L13.4421 3.79166H9.19211L8.66711 5.95833C8.60045 6.24166 8.34211 6.43333 8.05878 6.43333C8.00878 6.43333 7.95878 6.42499 7.90878 6.41666C7.57545 6.33333 7.36711 5.99999 7.45045 5.65833L7.90045 3.78333H6.20878C5.39211 3.78333 4.66711 4.31666 4.42545 5.09999L0.917113 16.3917C0.550446 17.6 1.44211 18.8333 2.70045 18.8333H13.6504C14.5171 18.8333 15.2671 18.25 15.4671 17.4083L18.2754 6.13333C18.3254 5.92499 18.3421 5.71666 18.3254 5.51666C18.3088 5.31666 18.2671 5.11666 18.1838 4.94166ZM12.2504 14.4583H5.58378C5.24211 14.4583 4.95878 14.175 4.95878 13.8333C4.95878 13.4917 5.24211 13.2083 5.58378 13.2083H12.2504C12.5921 13.2083 12.8754 13.4917 12.8754 13.8333C12.8754 14.175 12.5921 14.4583 12.2504 14.4583ZM13.0838 11.125H6.41711C6.07545 11.125 5.79211 10.8417 5.79211 10.5C5.79211 10.1583 6.07545 9.87499 6.41711 9.87499H13.0838C13.4254 9.87499 13.7088 10.1583 13.7088 10.5C13.7088 10.8417 13.4254 11.125 13.0838 11.125Z"></path></svg>
            <div>IDO Pool</div>
          </div>
        </div>`

      footerAccountModal.insertAdjacentHTML("beforebegin", `${htmlContent}`)
    }
    const closeButton = document.querySelector('button[aria-label="Close"]') as HTMLButtonElement

    const handleClickMyAccount = () => {
      closeButton?.click()
      navigate(routesName.MY_ACCOUNT)
    }

    const handleClickIdoPool = () => {
      closeButton?.click()
      navigate(routesName.PROJECTS)
    }

    const btnMyAccount = document.getElementById("btn-my-account")
    const btnIdoPool = document.getElementById("btn-ido-pool")
    btnMyAccount?.addEventListener("click", handleClickMyAccount)
    btnIdoPool?.addEventListener("click", handleClickIdoPool)

    return () => {
      btnMyAccount?.removeEventListener("click", handleClickMyAccount)
      btnIdoPool?.removeEventListener("click", handleClickIdoPool)
    }
  }, [accountModalOpen])
}
